<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω—Ç–µ–Ω—Ç –ó–∞–≤–æ–¥ ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</title>
    <style>
        :root { --bg: #0d0d0d; --card: #1a1a1a; --accent: #00ff88; --text: #ffffff; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 { color: var(--accent); border-bottom: 2px solid #333; padding-bottom: 10px; }
        
        /* –°–µ—Ç–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px; }
        .card { background: var(--card); border-radius: 15px; padding: 25px; border: 1px solid #333; transition: 0.3s; }
        .card:hover { border-color: var(--accent); transform: translateY(-5px); }
        
        .platform-label { font-size: 12px; color: var(--accent); text-transform: uppercase; font-weight: bold; }
        .username { font-size: 20px; font-weight: bold; margin: 5px 0 20px 0; }
        
        .stat-box { display: flex; justify-content: space-between; align-items: center; background: #222; padding: 15px; border-radius: 10px; margin-bottom: 10px; }
        .stat-label { font-size: 14px; color: #aaa; }
        .stat-value { font-size: 22px; font-weight: bold; }
        .views { color: #00d4ff; }

        .loading { text-align: center; margin-top: 50px; font-size: 18px; color: var(--accent); }
        .error { background: #331111; color: #ff9999; padding: 20px; border-radius: 10px; border: 1px solid red; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <h1>üè≠ –ö–æ–Ω—Ç–µ–Ω—Ç –ó–∞–≤–æ–¥ ‚Äî –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h1>
    <div id="status" class="loading">‚öôÔ∏è –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å n8n –∏ —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ Blotato...</div>
    <div id="stats-grid" class="grid"></div>
    <div id="error-box" class="error" style="display:none;"></div>
</div>

<script>
    // –°–Æ–î–ê –í–°–¢–ê–í–¨–¢–ï –í–ê–® URL –ò–ó n8n
    const n8nWebhookUrl = "–í–ê–®_–ü–†–û–î–ê–ö–®–ù_URL_–í–ï–ë–•–£–ö–ê_–ò–ó_N8N";

    async function loadData() {
        const grid = document.getElementById('stats-grid');
        const status = document.getElementById('status');
        const errorBox = document.getElementById('error-box');

        try {
            const response = await fetch(n8nWebhookUrl);
            if (!response.ok) throw new Error("n8n –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É " + response.status);
            
            const data = await response.json();
            
            // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç
            if (!data || data.length === 0) {
                status.innerText = "üîå –ê–∫–∫–∞—É–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ Blotato.";
                return;
            }

            status.style.display = 'none';
            grid.innerHTML = data.map(acc => `
                <div class="card">
                    <div class="platform-label">${acc.platform || '–°–æ—Ü—Å–µ—Ç—å'}</div>
                    <div class="username">${acc.username || '–ë–µ–∑ –∏–º–µ–Ω–∏'}</div>
                    
                    <div class="stat-box">
                        <span class="stat-label">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</span>
                        <span class="stat-value">${acc.total_posts || 0}</span>
                    </div>
                    
                    <div class="stat-box">
                        <span class="stat-label">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã</span>
                        <span class="stat-value views">${acc.metrics?.views || acc.total_views || 0}</span>
                    </div>
                </div>
            `).join('');

        } catch (err) {
            status.style.display = 'none';
            errorBox.style.display = 'block';
            errorBox.innerHTML = `<b>–û—à–∏–±–∫–∞:</b> ${err.message}<br><br>
            1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–æ—Ä–∫—Ñ–ª–æ—É –≤ n8n –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.<br>
            2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ n8n —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç Blotato.`;
        }
    }

    loadData();
</script>

</body>
</html>
